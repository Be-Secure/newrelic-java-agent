dependencies {
    implementation(project(":agent-bridge"))
    implementation(project(":agent-bridge-datastore"))

    implementation platform('software.amazon.awssdk:bom:2.16.81')
    implementation("software.amazon.awssdk:dynamodb:2.16.81")
    
}

//repositories {
//    mavenCentral()
////    maven {
////        url 'https://s3-us-west-2.amazonaws.com/dynamodb-local/release'
////    }
//}

jar {
    manifest { attributes 'Implementation-Title': 'com.newrelic.instrumentation.aws-java-sdk-dynamodb-v2' }
}

//for instrumentation verifier plugin. originallly applied aat top level gradle script instrumentation.gradle
verifyInstrumentation {
    passesOnly 'software.amazon.awssdk:dynamodb:2.16.81,)'
}

// copy the native files
//task copyNativeDeps(type: Copy) {
//    from(configurations.testCompileClasspath) {
//        include "*.so"
//        include "*.dylib"
//    }
//    into "build/nr-native-libs"
//}
//
//test {
//    dependsOn copyNativeDeps
//    jvmArgs(["-Dsqlite4java.library.path=build/nr-native-libs"])
//}

//for gradle compatiblity site plugin. originallly applied aat top level gradle script instrumentation.gradle
site {
    title 'AWS DynamoDB'
    type 'Datastore'
}
