name: Functional Tests

on:
  pull_request:
    branches: [ main ]
    types: [synchronize, opened, reopened, ready_for_review]

jobs:
  java-functional-tests:
    uses: newrelic/newrelic-java-agent/.github/workflows/run-gradle-build.yml@tcrone/gha-build-adjustments
    with:
      command: ./gradlew --console=plain --parallel :functional_test:test --continue

  scala-functional-tests:
    uses: newrelic/newrelic-java-agent/.github/workflows/run-gradle-build.yml@tcrone/gha-build-adjustments
    with:
      command: ./gradlew --console=plain --parallel :newrelic-scala-api:test :newrelic-scala-cats-api:test :newrelic-scala-zio-api:test --continue
